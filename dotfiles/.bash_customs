#!/bin/bash

#########################
# Custom configurations #
#########################

# This is like a `.uniq` on the hystory!
export HISTCONTROL=ignoreboth:erasedups

# 10k lines of history
export HISTFILESIZE=10000

# Bash history handling with multiple terminals
# This item must come before .ps1
export PROMPT_COMMAND='history -a'

# PS1 configuration
if [ -f "$HOME/.ps1" ] ; then
    source "$HOME/.ps1"
fi

# get api keys and other secrets
if [ -f "$HOME/.bash_secrets" ] ; then
    source "$HOME/.bash_secrets"
fi

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi

export CDPATH=".:~/:~/Downloads:~/projetos:~/projetos/locaweb"

# Ignore case
shopt -s cdspell
bind 'set completion-ignore-case on'

# Rbenv config
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"
export PATH="$HOME/.rbenv/plugins/ruby-build/bin:$PATH"

# ActiveTCL
export PATH="$PATH:/opt/ActiveTcl-8.6/bin"

# NPM
export PATH=~/.npm-global/bin:$PATH

# Terminator tab/title naming
set_title() { printf "\e]2;$*\a"; }

# editor
export EDITOR='emacsclient -a $HOME/scripts/emacs-editor'

# Enable history for Erlang/Elixir
export ERL_AFLAGS="-kernel shell_history enabled"

# Undistract-me config
# sudo apt-get install undistract-me
. /usr/share/undistract-me/long-running.bash
notify_when_long_running_commands_finish_install

# Set my key as default
export GPGKEY=A86BDBC5

# Bash json parser
if [ -f "$HOME/scripts/json_value" ]; then
    source "$HOME/scripts/json_value"
fi

# Exercism
if [ -f ~/.config/exercism/exercism_completion.bash ]; then
    source ~/.config/exercism/exercism_completion.bash
fi

# Fix to use Dunst instead norify-osd in i3
export XDG_DATA_HOME=${XDG_DATA_HOME:="$HOME/.local/share"}
